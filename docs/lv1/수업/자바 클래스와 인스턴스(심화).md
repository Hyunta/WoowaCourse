# ğŸ“– í´ë˜ìŠ¤ì™€ ì¸ìŠ¤í„´ìŠ¤(ì‹¬í™”)

# ë“¤ì–´ê°€ê¸° ì „ì—

- [ì¢‹ì€ ê°ì²´ì˜ 7ê°€ì§€ ë•ëª©](https://codingnuri.com/seven-virtues-of-good-object)ì„ ì½ì–´ ë³¸ë‹¤.

# ê°ì²´ì™€ í´ë˜ìŠ¤

## í´ë˜ìŠ¤

- í´ë˜ìŠ¤ëŠ” ê°ì²´ì˜ íŒ©í† ë¦¬(factory)ì´ë©°, ê°ì²´ë¥¼ ë§Œë“¤ê³ , ì¶”ì í•˜ê³ , ì ì ˆí•œ ì‹œì ì— íŒŒê´´í•œë‹¤.
- í´ë˜ìŠ¤ëŠ” ê°ì²´ë¥¼ ìƒì„±í•˜ë©° ì¼ë°˜ì ìœ¼ë¡œ í´ë˜ìŠ¤ê°€ ê°ì²´ë¥¼ 'ì¸ìŠ¤í„´ìŠ¤í™”í•œë‹¤(instantiate)'ë¼ê³  í‘œí˜„í•œë‹¤.

```java
public class LottoNumber {
    private final int value;

    public LottoNumber(final int value) {
        this.value = value;
    }
}
```

- ì•„ì‰½ê²Œë„ Javaì—ì„œ ì œê³µí•˜ëŠ” `new` ì—°ì‚°ìëŠ” ì¶©ë¶„íˆ ê°•ë ¥í•˜ì§€ ì•Šì•„ ìœ ì‚¬í•œ ê°ì²´ê°€ ì¡´ì¬í•˜ê±°ë‚˜ ì¬ì‚¬ìš© ê°€ëŠ¥í•œì§€ í™•ì¸í•˜ì§€ ì•ŠëŠ”ë‹¤.
- ì¢…ì¢… í´ë˜ìŠ¤ë¥¼ ê°ì²´ì˜ í…œí”Œë¦¿ìœ¼ë¡œ ë³´ì§€ë§Œ 'ê°ì²´ì˜ ëŠ¥ë™ì ì¸ ê´€ë¦¬ì'ë¡œ ìƒê°í•´ì•¼ í•œë‹¤.
- í´ë˜ìŠ¤ëŠ” ê°ì²´ë¥¼ ë³´ê´€í•˜ê³  í•„ìš”í•  ë•Œ ê°ì²´ë¥¼ êº¼ë‚¼ ìˆ˜ ìˆê³  ë” ì´ìƒ í•„ìš”í•˜ì§€ ì•Šì„ ë•Œì—ëŠ” ê°ì²´ë¥¼ ë°˜í™˜í•  ìˆ˜ ìˆëŠ” ì €ì¥ì†Œ(storage unit) ë˜ëŠ” ì›¨ì–´í•˜ìš°ìŠ¤(warehouse)ë¡œ ë°”ë¼ë´ì•¼ í•œë‹¤.

```java
public class LottoNumber {
    private static final int MINIMUM_NUMBER = 1;
    private static final int MAXIMUM_NUMBER = 45;

    private static final LottoNumber[] NUMBERS = new LottoNumber[MAXIMUM_NUMBER + 1];

    private int value;

    static {
        IntStream.rangeClosed(LottoNumber.MINIMUM_NUMBER, LottoNumber.MAXIMUM_NUMBER)
                .forEach(number -> NUMBERS[number] = new LottoNumber(number))
        ;
    }

    private LottoNumber(final int value) {
        this.value = value;
    }
    
    public static LottoNumber from(final int value) {
        validate(value);
        return NUMBERS[value];
    }
}
```

## ìƒì„±ì

- ìƒì„±ìëŠ” ëª‡ ê°œì˜ ì¸ìë“¤ì„ ì „ë‹¬ë°›ì•„ ì´ë“¤ì„ ì´ìš©í•´ì„œ ì–´ë–¤ ì¼ì„ ìˆ˜í–‰í•œ í›„, ê°ì²´ê°€ ìì‹ ì˜ ì˜ë¬´ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ ì¤€ë¹„ì‹œí‚¨ë‹¤.
- ì‘ì§‘ë„ê°€ ë†’ê³  ê²¬ê³ í•œ í´ë˜ìŠ¤ì—ëŠ” ì ì€ ìˆ˜ì˜ ë©”ì„œë“œì™€ ìƒëŒ€ì ìœ¼ë¡œ ë” ë§ì€ ìˆ˜ì˜ ìƒì„±ìê°€ ì¡´ì¬í•œë‹¤.

```java
new LottoNumber(30);
new LottoNumber("30");
```

- ìƒì„±ìì˜ ì£¼ëœ ì„ë¬´ëŠ” ì œê³µëœ ì¸ìë¥¼ ì‚¬ìš©í•´ì„œ ìº¡ìŠí™”ëœ í”„ë¡œí¼í‹°ë¥¼ ì´ˆê¸°í™”í•˜ëŠ” ê²ƒì´ë‹¤.
- ì´ˆê¸°í™” ë¡œì§ì„ ì˜¤ì§ í•˜ë‚˜ì˜ ìƒì„±ìì—ë§Œ ìœ„ì¹˜ì‹œí‚¤ê³  ì´ ìƒì„±ìë¥¼ 'ì£¼ ìƒì„±ì(primary constructor)'ë¼ê³  ë¶€ë¥¸ë‹¤.
- ë¶€ ìƒì„±ì(secondary constructor)ë¼ê³  ë¶€ë¥´ëŠ” ë‹¤ë¥¸ ìƒì„±ìë“¤ì´ ì£¼ ìƒì„±ìë¥¼ í˜¸ì¶œí•˜ë„ë¡ ë§Œë“ ë‹¤.

```java
public class LottoNumber {
    private final int value;

    public LottoNumber(final String value) {
        this(Integer.parseInt(value));
    }

    public LottoNumber(final int value) {
        this.value = value;
    }
}
```

- ë©”ì„œë“œì˜ ìˆ˜ê°€ ë§ì„ìˆ˜ë¡ ë‹¨ì¼ ì±…ì„ ì›ì¹™(single responsibility principle)ì„ ìœ„ë°˜í•˜ì§€ë§Œ ìƒì„±ìì˜ ìˆ˜ê°€ ë§ì•„ì§ˆìˆ˜ë¡ í´ë¼ì´ì–¸íŠ¸ê°€ í´ë˜ìŠ¤ë¥¼ ë” ìœ ì—°í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
- ì¤‘ë³µ ì½”ë“œë¥¼ ë°©ì§€í•˜ê³  ì„¤ê³„ë¥¼ ë” ê°„ê²°í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ìœ ì§€ ë³´ìˆ˜ì„±ì´ í–¥ìƒëœë‹¤.
- ì£¼ ìƒì„±ìëŠ” ê°ì²´ ì´ˆê¸°í™” í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹œì‘í•˜ëŠ” ìœ ì¼í•œ ì¥ì†Œì´ê¸° ë•Œë¬¸ì— ì œê³µë˜ëŠ” ì¸ìë“¤ì´ ì™„ì „í•´ì•¼ í•œë‹¤.

# ìƒì†ê³¼ ì¡°í•©

## ìƒì†

- ìƒì†ì€ ì½”ë“œë¥¼ ì¬ì‚¬ìš©í•˜ëŠ” ê°•ë ¥í•œ ìˆ˜ë‹¨ì´ì§€ë§Œ í•­ìƒ ìµœì„ ì€ ì•„ë‹ˆë‹¤.
- ê°ì²´ ì‚¬ì´ì˜ ê´€ê³„ë¥¼ ë„ˆë¬´ ë³µì¡í•˜ê²Œ ë§Œë“¤ê¸°ë„ í•˜ì§€ë§Œ ê·¼ë³¸ì ì¸ ì›ì¸ì€ ìƒì† ê·¸ ìì²´ê°€ ì•„ë‹ˆë‹¤.
- ìƒì†ì„ ì™„ì „íˆ ì œê±°í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì˜¬ë°”ë¥´ê²Œ ì‚¬ìš©í•˜ì.

- ê°€ìƒ ë©”ì„œë“œ (virtual method)

```java
public class Document {
    public int length() {
        return this.content().length;
    }
    
    public byte[] content() {
        // ë¬¸ì„œì˜ ë‚´ìš©ì„
        // ë°”ì´íŠ¸ ë°°ì—´ë¡œ ë¡œë“œí•œë‹¤
    }
}
public class EncryptedDocument extends Document {
    @Override
    public byte[] content() {
        // ë¬¸ì„œë¥¼ ë¡œë“œí•´ì„œ,
        // ì¦‰ì‹œ ë³µí˜¸í™”í•˜ê³ ,
        // ë³µí˜¸í™”í•œ ë‚´ìš©ì„ ë°˜í™˜í•œë‹¤.
    }
}
```

- í´ë˜ìŠ¤ì™€ ë©”ì„œë“œë¥¼ `final`ì´ë‚˜ `abstract` ë‘˜ ì¤‘ í•˜ë‚˜ë¡œ ì œí•œí•œë‹¤ë©´ ë¬¸ì œê°€ ë°œìƒí•  ê°€ëŠ¥ì„±ì„ ì—†ì•¨ ìˆ˜ ìˆë‹¤.
- ì‹¤ì œë¡œ `Document`ê°€ `final`ì´ë¼ë©´ ìƒì†ì´ ë¶ˆê°€ëŠ¥í•´ì§„ë‹¤.
- ë°˜ë©´ì— `content()` ê°€ `abstract`ë¼ë©´ `Document` ì•ˆì—ì„œëŠ” ë©”ì„œë“œë¥¼ êµ¬í˜„í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— í˜¼ë€ìŠ¤ëŸ¬ì›€ ì—†ì´ `length()` ë©”ì„œë“œë¥¼ ì´í•´í•  ìˆ˜ ìˆë‹¤.

- **ìƒìœ„ í´ë˜ìŠ¤ì˜ ë‚´ë¶€ êµ¬í˜„ì´ ë‹¬ë¼ì§€ë©´ ì½”ë“œ í•œ ì¤„ ê±´ë“œë¦¬ì§€ ì•Šì€ í•˜ìœ„ í´ë˜ìŠ¤ê°€ ì˜¤ë™ì‘í•  ìˆ˜ ìˆë‹¤.**

  > ê¸°ë³¸ì ìœ¼ë¡œ ì œê³µí•˜ëŠ” ì»¬ë ‰ì…˜ì´ë˜ê°€ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ì¡°ì‹¬í•´ì„œ ì‚¬ìš©ì„ í•´ì•¼í•œë‹¤, ìƒìœ„ í´ë˜ìŠ¤ê°€ ë³€ê²½ì´ ì¼ì–´ë‚˜ë©´ ì¶”ê°€ì ìœ¼ë¡œ êµ¬í˜„ì„ í•´ì¤˜ì•¼ í•˜ê¸° ë•Œë¬¸ì—

```java
public class LottoNumbers extends HashSet<LottoNumber> {
    private int addCount = 0;

    @Override
    public boolean add(final LottoNumber lottoNumber) {
        addCount++;
        return super.add(lottoNumber);
    }

    @Override
    public boolean addAll(final Collection<? extends LottoNumber> c) {
        addCount += c.size();
        return super.addAll(c);
    }

    public int getAddCount() {
        return addCount;
    }
}

public boolean addAll(final Collection<? extends E> c) {
    boolean modified = false;
    for (E e : c)
        if (add(e))
            modified = true;
    return modified;
}
```

- ì´ ê²½ìš° í•˜ìœ„ í´ë˜ìŠ¤ì—ì„œ

   

  ```
  addAll()
  ```

  ì„ ì¬ì •ì˜í•˜ì§€ ì•Šìœ¼ë©´ ë¬¸ì œë¥¼ ê³ ì¹  ìˆ˜ ìˆë‹¤.

  - `HashSet`ì˜ `addAll()`ì´ `add()`ë¥¼ ì´ìš©í•´ êµ¬í˜„í–ˆìŒì„ ê°€ì •í•œ í•´ë²•ì´ë‹¤.

- ```
  addAll()
  ```

  ë¥¼ ë‹¤ë¥¸ ì‹ìœ¼ë¡œ ì¬ì •ì˜í•  ìˆ˜ ë„ ìˆë‹¤.

  - ìƒìœ„ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œ ë™ì‘ì„ ë‹¤ì‹œ êµ¬í˜„í•˜ëŠ” ì´ ë°©ì‹ì€ ì–´ë µê³  ì‹œê°„ë„ ë” ë“¤ê³  ìì¹« ì˜¤ë¥˜ë¥¼ ë‚´ê±°ë‚˜ ì„±ëŠ¥ì„ ë–¨ì–´ëœ¨ë¦´ ìˆ˜ë„ ìˆë‹¤.

## ì¡°í•©

- ê¸°ì¡´ í´ë˜ìŠ¤ë¥¼ í™•ì¥í•˜ëŠ” ëŒ€ì‹  ìƒˆë¡œìš´ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê³  private í•„ë“œë¡œ ê¸°ì¡´ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¸ì¡°í•˜ê²Œ í•˜ì.
- ìƒì†ì€ ë°˜ë“œì‹œ í•˜ìœ„ í´ë˜ìŠ¤ê°€ ìƒìœ„ í´ë˜ìŠ¤ì˜ 'ì§„ì§œ' í•˜ìœ„ íƒ€ì…ì¸ ìƒí™©ì—ì„œë§Œ ì“°ì—¬ì•¼ í•œë‹¤.
- í´ë˜ìŠ¤ Bê°€ í´ë˜ìŠ¤ Aì™€ is-a ê´€ê³„ì¼ ë•Œë§Œ í´ë˜ìŠ¤ Aë¥¼ ìƒì†í•´ì•¼ í•œë‹¤.
  - Bê°€ ì •ë§ Aì¸ê°€?

```java
public class WinningNumber extends LottoNumbers {
    private final LottoNumber bonus;
}
```

> ìƒì†ì´ ì ì ˆí•œ ê²½ìš°ë€ ì–¸ì œì¼ê¹Œ? í´ë˜ìŠ¤ì˜ í–‰ë™ì„ í™•ì¥(extend)í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì •ì œ(refine)í•  ë•Œë‹¤. í™•ì¥ì´ë€ ìƒˆë¡œìš´ í–‰ë™ì„ ë§ë¶™ì—¬ ê¸°ì¡´ì˜ í–‰ë™ì„ ë¶€ë¶„ì ìœ¼ë¡œ ë³´ì™„í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•˜ê³  ì •ì œë€ ë¶€ë¶„ì ìœ¼ë¡œ ë¶ˆì™„ì „í•œ í–‰ë™ì„ ì™„ì „í•˜ê²Œ ë§Œë“œëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.

> ê°ì²´ ì§€í–¥ ì´ˆê¸°ì— ê°€ì¥ ì¤‘ìš”ì‹œ ì—¬ê¸°ëŠ” ê°œë…ì€ ì¬ì‚¬ìš©ì„±(reusability)ì´ì—ˆì§€ë§Œ, ì§€ê¸ˆì€ ì›Œë‚™ ì‹œìŠ¤í…œì´ ë°©ëŒ€í•´ì§€ê³  ì¦ì€ ë³€í™”ê°€ ë°œìƒí•˜ë‹¤ ë³´ë‹ˆ ìœ ì—°ì„±(flexiblity)ì´ ë” ì¤‘ìš”í•œ ê°œë…ì´ ë˜ì—ˆë‹¤.

# ê°€ë³€ ê°ì²´ì™€ ë¶ˆë³€ ê°ì²´

## ê°€ë³€ ê°ì²´

```java
public class Cash {
    private int dollars;

    public void mul(final int factor) {
        this.dollars *= factor;
    }
}
Cash five = new Cash(5);
five.mul(10);
System.out.println(five);
```

## ë¶ˆë³€ ê°ì²´

- ëª¨ë“  í´ë˜ìŠ¤ë¥¼ ìƒíƒœë¥¼ ë³€ê²½í•  ìˆ˜ ì—†ëŠ” ë¶ˆë³€ í´ë˜ìŠ¤(immutable class)ë¡œ ë§Œë“¤ë©´ ìœ ì§€ ë³´ìˆ˜ì„±ì´ í¬ê²Œ í–¥ìƒëœë‹¤.

```java
public class Cash {
    private final int dollars;

    public Cash mul(final int factor) {
        return new Cash(this.dollars * factor);
    }
}
Cash five = new Cash(5);
Cash fifty = five.mul(10);
System.out.println(fifty);
```

- ë¶ˆë³€ ê°ì²´ì—ëŠ” ì•„ë˜ì˜ â€˜ì‹ë³„ì ë³€ê²½(identity mutability)â€™ ë¬¸ì œê°€ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.

```java
Map<Cash, String> map = new HashMap<>(); 
Cash five = new Cash("$5");
Cash ten = new Cash("$10");
map.put(five, "five");
map.put(ten, "ten");
five.mul(2);
map.get(five);
```

- ê°ì²´ê°€ ì™„ì „í•˜ê³  ê²¬ê³ í•œ ìƒíƒœì´ê±°ë‚˜ ì•„ë‹ˆë©´ ì•„ì˜ˆ ì‹¤íŒ¨í•˜ëŠ” ì‹¤íŒ¨ ì›ìì„±(failure atomicity)ì„ ê°€ì§„ë‹¤.

```java
public class Cash {
    private int dollars;
    private int cents;

    public void mul(final int factor) {
        this.dollars *= factor;
    
        if (/* ë­”ê°€ ì˜ëª» ëë‹¤ë©´ */) {
            throw new RuntimeException("oops...");
        }
        
        this.cents *= factor;
    }
);
```

- ì‹œê°„ì  ê²°í•©(temporal coupling)ì„ ì—†ì•¨ ìˆ˜ ìˆë‹¤.

```java
Cash price = new Cash();
price.setDollars(29);
price.setCents(95);
System.out.println(price); // "$29.95"
Cash price = new Cash();
price.setDollars(29);
System.out.println(price); // "$29.00"!
price.setCents(95);
```

- ìŠ¤ë ˆë“œ ì•ˆì •ì„±
  - ê°ì²´ê°€ ì—¬ëŸ¬ ìŠ¤ë ˆë“œì—ì„œ ë™ì‹œì—(concurrently) ì‚¬ìš©ë  ìˆ˜ ìˆê³  ì˜ˆì¸¡ ê°€ëŠ¥í•œ(predictable) ê²°ê³¼ë¥¼ ë³´ì¥í•˜ëŠ” ê°ì²´ì˜ í’ˆì§ˆ

- ë‹¨ìˆœì„±(simplicity), ê°ì²´ê°€ ë” ë‹¨ìˆœí•´ì§ˆ ìˆ˜ë¡ ì‘ì§‘ë„ëŠ” ë” ë†’ì•„ì§€ê³ , ìœ ì§€ë³´ìˆ˜ëŠ” ë” ì‰¬ì›Œì§„ë‹¤.
- ë¶ˆë³€ ê°ì²´ì˜ í¬ê¸°ê°€ ì‘ì€ ì´ìœ ëŠ” ë¶ˆë³€ ê°ì²´ì˜ ê²½ìš° ìƒì„±ì ì•ˆì—ì„œë§Œ ìƒíƒœë¥¼ ì´ˆê¸°í™”í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.
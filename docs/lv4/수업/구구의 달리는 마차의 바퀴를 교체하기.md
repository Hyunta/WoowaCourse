설명식 수업입니다.

## 레벨3부터 지금까지 한일

- 서비스를 기획했다.
- 그리고 빠르게 런칭했다.
- 구현하면서 프로젝트에 대한 도메인 지식이 늘어간다.
  - 관련 도메인 분야를 공부하면서 누적되는 지식(배달, 이커머스, 메신저 등등)

- 개선이 필요한 부분이 보인다.
  - 사용자 요구사항
  - 경쟁사 대응
  - 팀원들의 도메인 이해도 증가
  - 공부하면서 알게 된 기술 적용



## 유지보수 역량이 필요하다

- (초창기) 배달의민족은 대학생도 만들 수 있다.
  - 만드는 건 누구나 한다. -> 앱 만드는게 쉽다고 생각함
  - 서비스를 유지하고 발전시켜 나가는게 어렵다.
- 서비스를 지속적으로 발전시키기 위해 필요한 역량은?
  - 협업 - 커뮤니케이션 역량을 굉장히 중요하게 생각한다.
  - 유지보수(리팩토링) - SI 개발자를 채용해도 될까?



SI 개발자들을 모아서 스타트업을 했을 떄의 문제점:

- 프로젝트가 끝나자 모든게 멈추어 버렸다. 프로젝트를 만들기 까지만 해봤기 때문에 유지보수를 해나가는게 어려웠다.



## 달리는 기차의 바퀴를 갈아끼운다.

- 처음부터 완벽하게 만들 수 없다.
  - 왜?
    - 시장 상황은 바뀐다.
    - 참여자들의 역량도 변한다
    - 기술이 발전한다
    - 등등
- 달리는 기차의 바퀴를 바꿀 수 있어야 한다.
  - 어떻게?
    - 점진적으로 리팩터링하는 미션으로 연습한다.



MVC 프레임워크 구현하기 이지만 자바 -> 자바로 점진적인 리팩터링하기



## Legacy MVC

- Controller 구현 및 추가
  - 프레임워크도 수정해야 한다.
  - 비지니스 로직 구축에 집중하고 싶다.
- 다시 만들 것인가?
  - 규모가 작으면 새로 만드는게 빠를지도 모르겠다.
  - 수년 간 운영한 서비스를 바꾸는게 쉬울까?
  - 우리가 구현한  프레임 워크를 Spring MVC로 변경하려면?
  - JDBC, MyBatis를 쓰다가 JPA 같은 ORM으로 바꾸려면?
  - DB를 MS-SQL에서 MySql로 전환하려면?
  - 자바에서 코틀린으로 바꾸려면?



## 원대한 재설계의 꿈

- 레거시는 쓰레기다
  - 나쁜 코드가 쌓일수록 팀 생산성이 떨어진다
  - 프로젝트에 새로운 개발자가 늘어나면 생산성이 높아질까?
- 팀에서 불만 폭발
  - 관리자에게 재설계 요구
  - 재설계 하락
- 차세대 프로젝트의 한계
  - 레거시팀은 유지보수를 하고
  - 타이거 팀은 새로운 프로젝트를 담당한다.
- 악순환의 반복
  - 새 시스템이 기존 시스템을 따라가는 동안 초창기 타이거 팀원은 모두 퇴사
  - 새로운 팀원을 뽑는다.
  - 다시 만들자고 한다. 왜? 현재 시스템이 쓰레기라서



## 빅뱅 전략

>  빅뱅 방식으로 백날 해봐야, 빅뱅만 나올 뿐이다. -마틴 파울러

레거시는 쓰레기다

그러디 처음부터 다시 만들자

일명 차세대 프로젝트

- 문제점

프로젝트가 실패했을 경우 리스크가 너무 크다.



## 점진적인 리팩터링 전략

- 특정 기능을 새로운 애플리케이션 및 서비스로 점진적으로 교체하여 레거시 시스템을 단계적으로 마이그레이션한다.
- 레거시 시스템의 기능이 교체되면 결국 새 시스템이 기존 시스템의 모든 기능을 대체하여 기존 시스템을 중단하고 서비스 해제할 수 있다.



- 거대한 엔터프라이즈 시스템을 운영하면서 내부를 교체하기는 힘들다.
- 처음엔 상당히 느리고 답답하다
- 그럼에도 빅뱅 전략보다 낫다
  - 실수는 불가피하다.
    - 조금씩 작은 단계로 나눠서 전환해야 실수 또한 작아지고 복구하기 쉽다.
  - 서비스의 일부를 배포하면서 경험이 쌓이게 된다.
    - 새루은 서비스가 실제로 사용되는 과정에서 깨닫는게 있다.



## 과도기

리팩터링 과정 중에 레거시 코드와 새로운 코드가 공존하는 시기

- ASP, PHP 에서 자바로 리팩터링 -> ASP, PHP 전문가를 구할 수가 없어서



다른 언어 -> 자바

- 게이트웨이 라우팅 패턴



모놀리스 -> 마이크로서비스

- 왜 MSA를 선택하려하는가?
  - 달성하려는 목표가 무엇인가?
  - 다른 대안은 없는가?
  - 확장성, 견고성, 유연성 같은 장점이 있다.
  - MSA 문제점
    - 네트워크를 거치는 컴퓨터 간의 통신은 즉각적이지 않다.
    - 트랜잭션처럼 모놀리스로 쉽게 해결 가능한 작업이 어려워진다.
    - 시스템 복잡도가 올라가면서 운영 비용이 올라간다.
- 모놀리스는 나쁜 설계인가?
  - 레거시, 모놀리스는 선택이다.
  - 간단한 워크플로우, 모니터링, 이슈 해결, 전 구간 테스트, 단순함 등등



리팩터링을 잘 하기 위해서 깔끔한 코드를 짜고 테스트 코드를 만들어놓자.







